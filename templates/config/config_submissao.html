{% extends "base.html" %}
{% block title %}Configurações de Submissão{% endblock %}

{% block content %}
<div class="container py-4" id="configSubmissao"
     data-url-config-cliente-atual="{{ url_for('config_cliente_routes.configuracao_cliente_atual') }}"
     data-revisao-configs='{{ revisao_configs|tojson }}'
     data-min-rev="{{ config_cliente.num_revisores_min if config_cliente else 1 }}"
     data-max-rev="{{ config_cliente.num_revisores_max if config_cliente else 2 }}">
  <h1 class="h3 mb-4"><i class="bi bi-journal-text me-2"></i>Submissões e Revisão</h1>
  <div class="card border-info border-top border-4 shadow-sm mb-4">
    <div class="card-header bg-info text-white">
      <div class="d-flex align-items-center">
        <i class="bi bi-journal-text me-2 fs-5"></i>
        <h5 class="fw-bold mb-0">Submissões e Revisão</h5>

      </div>
    </div>
    <div class="card-body">




        <!-- Configurações de Revisão -->
        <div class="config-item p-4 form-group border rounded bg-light">
          <h6 class="mb-3 fw-semibold text-primary">
            <i class="bi bi-gear me-2"></i>Configurações de Revisão
          </h6>
          <p class="small text-muted mb-4">Ajuste limites e prazos para o processo de revisão de trabalhos.</p>
          
          <!-- Configurações de Revisores -->
          <div class="mb-4">
            <h6 class="small fw-semibold text-secondary mb-3">Limites de Revisores</h6>
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label fw-medium">Mínimo de Revisores</label>
                <input type="number" min="1" class="form-control" id="inputRevisoresMin" 
                       value="{{ config_cliente.num_revisores_min }}" 
                       data-update-url="{{ url_for('config_cliente_routes.set_num_revisores_min') }}">
                <small class="form-text text-muted">Quantidade mínima de revisores por trabalho.</small>
              </div>
              <div class="col-md-4">
                <label class="form-label fw-medium">Máximo de Revisores</label>
                <input type="number" min="1" class="form-control" id="inputRevisoresMax" 
                       value="{{ config_cliente.num_revisores_max }}" 
                       data-update-url="{{ url_for('config_cliente_routes.set_num_revisores_max') }}">
                <small class="form-text text-muted">Limite máximo de revisores por trabalho.</small>
              </div>
              <div class="col-md-4">
                <label class="form-label fw-medium">Limite Total de Revisores</label>
                <input type="number" min="1" class="form-control" id="inputLimiteTotalRevisores" 
                       value="{{ config_cliente.limite_total_revisores if config_cliente.limite_total_revisores else 10 }}" 
                       data-update-url="{{ url_for('config_cliente_routes.set_limite_total_revisores') }}">
                <small class="form-text text-muted">Número máximo total de revisores no sistema.</small>
              </div>
            </div>
          </div>
          
          <!-- Configurações de Prazos e Distribuição -->
          <div class="mb-3">
            <h6 class="small fw-semibold text-secondary mb-3">Prazos e Distribuição</h6>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label fw-medium">Prazo para Revisão (dias)</label>
                <input type="number" min="1" class="form-control" id="inputPrazoParecer" 
                       value="{{ config_cliente.prazo_parecer_dias }}" 
                       data-update-url="{{ url_for('config_cliente_routes.set_prazo_parecer_dias') }}">
                <small class="form-text text-muted">Tempo padrão para entrega do parecer de revisão.</small>
              </div>
              <div class="col-md-6">
                <label class="form-label fw-medium">Máximo de Trabalhos por Revisor</label>
                <input type="number" min="1" class="form-control" id="inputMaxTrabalhosRevisor" 
                       value="{{ config_cliente.max_trabalhos_por_revisor }}" 
                       data-update-url="{{ url_for('config_cliente_routes.set_max_trabalhos_revisor') }}">
                <small class="form-text text-muted">Total máximo de trabalhos atribuídos por revisor.</small>
              </div>
            </div>
          </div>
        </div>


        <div class="text-end mt-4">
          <a href="{{ url_for('peer_review_routes.submission_control') }}" class="btn btn-outline-primary">Distribuição de Trabalhos</a>
        </div>
      </div>
    </div>
    </div>

  <div id="mapearColunasModal"></div>
  <script type="text/template" id="mapearColunasTemplate">
    {% include 'trabalho/selecionar_colunas_trabalho.html' %}
  </script>

{% endblock %}



{% block scripts %}

{{ super() }}
<script src="{{ url_for('static', filename='js/config_revisao.js') }}"></script>
<script src="{{ url_for('static', filename='js/dashboard_cliente.js') }}"></script>
<script src="{{ url_for('static', filename='js/config_submissao.js') }}"></script>
{% endblock %}

