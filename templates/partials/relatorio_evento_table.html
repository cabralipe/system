<div class="table-responsive">
    <table
        class="table table-striped table-hover table-bordered table-sm align-middle"
    >
        <thead class="table-light">
            <tr>
                <th>Evento</th>
                <th class="text-center">Confirmados</th>
                <th class="text-center">Realizados</th>
                <th class="text-center">Cancelados</th>
                <th class="text-center">Pendentes</th>
                <th class="text-center">Check-ins</th>
                <th class="text-center">Visitantes</th>
                <th class="text-center">Total</th>
                <th class="text-center">Taxa Conclus√£o</th>
            </tr>
        </thead>
        <tbody>
            {% for stats in estatisticas_ordenadas %}
                <tr>
                    <td>{{ stats.nome }}</td>
                    <td class="text-center">{{ stats.confirmados }}</td>
                    <td class="text-center">{{ stats.realizados }}</td>
                    <td class="text-center">{{ stats.cancelados }}</td>
                    <td class="text-center">{{ stats.pendentes }}</td>
                    <td class="text-center">{{ stats.checkins }}</td>
                    <td class="text-center">{{ stats.visitantes_confirmados }}</td>
                    <td class="text-center">{{ stats.total }}</td>
                    <td class="text-center">
                        {% if stats.confirmados + stats.realizados > 0 %}
                            {% set taxa = (
                                stats.realizados
                                / (stats.confirmados + stats.realizados)
                            ) * 100 %}
                            <div class="progress" style="height: 20px;">
                                <div
                                    class="progress-bar
                                    {% if taxa < 50 %}bg-danger{% elif taxa < 80 %}
                                    bg-warning{% else %}bg-success{% endif %}"
                                    role="progressbar" style="width: {{ taxa }}%;">
                                    {{ taxa|round }}%
                                </div>
                            </div>
                        {% else %}
                            <span class="badge bg-secondary">N/A</span>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

