<!-- Configurações Gerais do Certificado do Evento -->
<div class="config-section">
    <h5><i class="fas fa-cog"></i> Configurações Gerais</h5>
    
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label for="evento_selecionado">
                    <i class="fas fa-calendar-alt"></i> Evento Selecionado
                </label>
                <input type="text" class="form-control" id="evento_selecionado" 
                       value="{% if evento %}{{ evento.nome }}{% endif %}" readonly>
                <small class="text-muted">Evento para o qual as configurações serão aplicadas</small>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="data_inicio_evento">
                    <i class="fas fa-calendar-check"></i> Data de Início
                </label>
                <input type="text" class="form-control" id="data_inicio_evento" 
                       value="{% if evento and evento.data_inicio %}{{ evento.data_inicio.strftime('%d/%m/%Y') }}{% endif %}" readonly>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="form-group">
                <label for="data_fim_evento">
                    <i class="fas fa-calendar-times"></i> Data de Término
                </label>
                <input type="text" class="form-control" id="data_fim_evento" 
                       value="{% if evento and evento.data_fim %}{{ evento.data_fim.strftime('%d/%m/%Y') }}{% endif %}" readonly>
            </div>
        </div>
    </div>
    
    <div class="form-group">
        <label for="descricao_evento">
            <i class="fas fa-align-left"></i> Descrição do Evento
        </label>
        <textarea class="form-control" id="descricao_evento" rows="3" readonly>{% if evento %}{{ evento.descricao or 'Sem descrição disponível' }}{% endif %}</textarea>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h6 class="mb-0"><i class="fas fa-chart-bar"></i> Estatísticas do Evento</h6>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-6">
                            <h4 class="text-primary" id="total_participantes">-</h4>
                            <small>Participantes</small>
                        </div>
                        <div class="col-6">
                            <h4 class="text-success" id="total_oficinas">-</h4>
                            <small>Oficinas</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <h6 class="mb-0"><i class="fas fa-certificate"></i> Certificados</h6>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-6">
                            <h4 class="text-warning" id="certificados_emitidos">-</h4>
                            <small>Emitidos</small>
                        </div>
                        <div class="col-6">
                            <h4 class="text-info" id="certificados_pendentes">-</h4>
                            <small>Pendentes</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="mt-3">
        <div class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary" onclick="previewCertificadoGeral()">
                <i class="fas fa-eye"></i> Visualizar Preview
            </button>
            <button type="button" class="btn btn-outline-success" onclick="gerarCertificadosGeral()">
                <i class="fas fa-download"></i> Gerar Certificados
            </button>
            <button type="button" class="btn btn-outline-info" onclick="exportarConfiguracoes()">
                <i class="fas fa-file-export"></i> Exportar Configurações
            </button>
        </div>
    </div>
    
    <div class="alert alert-success mt-3">
        <i class="fas fa-lightbulb"></i>
        <strong>Dica:</strong> Use o preview para verificar como o certificado ficará antes de gerar em lote para todos os participantes.
    </div>
</div>

<script>
// Carregar estatísticas do evento
$(document).ready(function() {
    {% if evento %}
    carregarEstatisticasEvento({{ evento.id }});
    {% endif %}
});

function carregarEstatisticasEvento(eventoId) {
    $.get(`/evento/${eventoId}/estatisticas`, function(data) {
        if (data.success) {
            $('#total_participantes').text(data.total_participantes || 0);
            $('#total_oficinas').text(data.total_oficinas || 0);
            $('#certificados_emitidos').text(data.certificados_emitidos || 0);
            $('#certificados_pendentes').text(data.certificados_pendentes || 0);
        }
    }).fail(function() {
        // Em caso de erro, manter os valores padrão
        console.log('Erro ao carregar estatísticas do evento');
    });
}

function previewCertificadoGeral() {
    {% if evento %}
    window.open('/certificado/preview_certificado_geral/{{ evento.id }}', '_blank');
    {% else %}
    alert('Nenhum evento selecionado');
    {% endif %}
}

function gerarCertificadosGeral() {
    {% if evento %}
    if (confirm('Deseja gerar certificados para todos os participantes elegíveis?')) {
        window.location.href = '/certificado/gerar_certificado_geral_evento/{{ evento.id }}';
    }
    {% else %}
    alert('Nenhum evento selecionado');
    {% endif %}
}

function exportarConfiguracoes() {
    // Implementar exportação de configurações
    alert('Funcionalidade em desenvolvimento');
}
</script>